mutate("{{i}}_std" := standardize_var_2(.data[[i]]))
}
colnames(psych_stats)
for(i in colnames(psych_stats)[20:29]){
psych_stats <- psych_stats %>%
mutate("{i}_std" := standardize_var_2(.data[[i]]))
}
colnames(psych_stats)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{{i}}_char" := as.character({{i}}))
}
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({i}))
}
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{{i}}_char" := as.character({{i}}))
}
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{{i}}_char" := as.character(.data[[i]]))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{{i}}_char" := as.character(.data[[i]]))
}
str(athletes_2)
athletes_2 <- athletes
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character(.data[[i]]))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character(.data[[i]]))
}
str(athletes_2)
## This doesn't work:
print_col <- function(dat, var){
print(dat %>% pull(var))
}
athletes %>%
print_col(Region)
## This works:
print_col <- function(dat, var){
print(dat %>% pull({{var}}))
}
athletes %>%
print_col(Region)
for(i in colnames(psych_stats)[20:29]){
psych_stats <- psych_stats %>%
mutate("{i}_std" := standardize_var_2(.data[[i]]))
}
colnames(psych_stats)
for(i in colnames(psych_stats)[20:29]){
psych_stats <- psych_stats %>%
mutate("{i}_std" := standardize_var_2(psych_stats, .data[[i]]))
}
for(i in colnames(psych_stats)[20:29]){
psych_stats <- psych_stats %>%
mutate("{i}_std" := standardize_var(psych_stats, .data[[i]]))
}
colnames(psych_stats)
# Chunk 1
source(here::here("output_hook.R"))
# Chunk 2
library(tidyverse)
athletes <- readRDS(file = here::here(  "raw_data", "athletes.rds"))
# Chunk 3
## Here we transform the Height and Weight columns to the type character:
athletes %>%
mutate(across(c(Height, Weight), as.character)) %>%
str
# Chunk 4
## And here we transform all numeric columns into character:
athletes %>%
mutate(across(where(is.numeric), as.character)) %>%
str()
# Chunk 5
standardize_column <- function(col){
(col - mean(col, na.rm = TRUE))/sd(col, na.rm = TRUE)
}
athletes %>%
mutate(across(where(is.numeric), standardize_column)) %>%
str()
# Chunk 7
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character(.data[[i]]))
}
str(athletes_2)
# Chunk 9
## This works:
print_col <- function(dat, var){
print(dat %>% pull({{var}}))
}
athletes %>%
print_col(Region)
# Chunk 10
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate(!!sym(i) := as.character(!!sym(i)))
}
str(athletes_2)
# Chunk 11
characters <- readRDS(here::here(  "raw_data", "characters.rds"))
psych_stats <- read.csv(here::here(  "raw_data", "psych_stats.csv"), sep = ";")
# Chunk 12
standardize_var <- function(dat, var){
column <- dat %>%
pull({{var}})
column_std <- (column - mean(column)) / sd(column)
return(column_std)
}
standardized_col <- psych_stats %>% standardize_var(messy_neat)
mean(standardized_col) %>% round(5)
sd(standardized_col)
colnames(psych_stats)
for(i in colnames(psych_stats)[20:29]){
psych_stats <- psych_stats %>%
mutate("{i}_std" := standardize_var(psych_stats, .data[[i]]))
}
colnames(psych_stats)
mean(psych_stats$flexible_rigid_std)
sd(psych_stats$flexible_rigid_std)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate("{i}_char" := as.character(.[[i]]))
}
str(athletes_2)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character(.[[i]]))
}
str(athletes_2)
str(athletes)
## This doesn't work:
print_col <- function(dat, var){
print(dat %>% pull(var))
}
athletes %>%
print_col(Region)
?across
psych_stats_std <- psych_stats %>%
mutate(
across(
.cols = where(is.numeric),
.fns = ~ standardize_var_2(psych_stats, .x),
.names = "{.col}_standardized"
)
)
3. Now build the same standardization function, but it should only take a numeric vector as input, not a whole `data.frame`.
styler:::style_active_file()
standardize_var <- function(dat, var){
column <- dat %>%
pull({{var}})
if(!is.numeric(column)){stop(paste0("Please provide a numeric vector! Yours has the type '", typeof(vec), "'."))}
column_std <- (column - mean(column)) / sd(column)
return(column_std)
}
standardized_col <- psych_stats %>%
standardize_var(messy_neat)
mean(standardized_col) %>% round(5)
sd(standardized_col)
str(athletes)
standardize_var_2(athletes, Region)
standardize_var <- function(dat, var){
column <- dat %>%
pull({{var}})
if(!is.numeric(column)){stop(paste0("Please provide a numeric vector! Yours has the type '", typeof(vec), "'."))}
column_std <- (column - mean(column)) / sd(column)
return(column_std)
}
## test the function:
standardize_var(athletes, Region)
standardize_var <- function(dat, var){
column <- dat %>%
pull({{var}})
if(!is.numeric(column)){stop(paste0("Please provide a numeric vector! Yours has the type '", typeof(column), "'."))}
column_std <- (column - mean(column)) / sd(column)
return(column_std)
}
## test the function:
standardize_var(athletes, Region)
# Chunk 1
source(here::here("output_hook.R"))
# Chunk 2
library(tidyverse)
athletes <- readRDS(file = here::here(  "raw_data", "athletes.rds"))
# Chunk 3
## Here we transform the Height and Weight columns to the type character:
athletes %>%
mutate(across(c(Height, Weight), as.character)) %>%
str
# Chunk 4
## And here we transform all numeric columns into character:
athletes %>%
mutate(across(where(is.numeric), as.character)) %>%
str()
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate(i = as.character(.$i))
}
athletes_2 <- athletes_2 %>%
mutate("Height" = as.character(.$i))
athletes_2 <- athletes_2 %>%
mutate("Height" = as.character(.$"Height"))
## This throws an error:
athletes_2 <- athletes
athletes_2
athletes_2$Height
typeof(athletes_2$Height)
athletes_2 <- athletes
athletes_2 <- athletes_2 %>%
mutate("Height" = as.character(.$"Height"))
typeof(athletes_2$Height)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate(i = as.character(.$i))
}
print_col <- function(dat, var){
print(dat %>% pull(var))
}
athletes %>%
print_col(Region)
## This works:
print_col <- function(dat, var){
print(dat %>% pull({{var}}))
}
athletes %>%
print_col(Region)
athletes_2 <- athletes
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character({{i}}))
}
str(athletes_2)
athletes_2 <- athletes
str(athletes_2)
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character({{i}}))
}
for(i in c("Height", "Weight")){
athletes_2 <- athletes_2 %>%
mutate({{i}} := as.character({{i}}))
}
str(athletes_2)
library(tidyverse)
athletes <- readRDS(file = here::here(  "raw_data", "athletes.rds"))
best_by_sport <- athletes %>%
## Get all gold medalists
filter(Medal == "Gold") %>%
## Group them by sport and region
group_by(Sport, Region) %>%
## count the number of medals each country has per sport category
count(Medal) %>%
## Now only group by sport, so we can extract the maximum medal row by sport, and not by sport and country
group_by(Sport) %>%
## Extract the country with the most medals
slice(which.max(n))
head(best_by_sport)
nrow(best_by_sport)
world_coordinates <- readRDS(file = here::here("raw_data", "world_coordinates.rds"))
medal_counts <- athletes %>%
filter(Medal == "Gold") %>%
group_by(Region) %>%
count(Medal)
medal_countries <- world_coordinates %>%
rename("Region" = region) %>%
left_join(medal_counts)
quarto::quarto_use_template("wjschne/apaquarto")
quarto::quarto_use_template("wjschne/apaquarto")
athletes
#| echo: false
#| message: false
library(tidyverse)
athletes <- readRDS(file = here::here(  "raw_data", "athletes.rds"))
head(athletes)
athletes
medal_counts <- athletes %>%
filter(Medal == "Gold") %>%
group_by(Region) %>%
count(Medal)
medal_counts
penguins_species <- penguins %>%
group_by(species) %>%
summarise(mean_flipper_length = mean(flipper_length_mm, na.rm = TRUE),
n = n())
library(palmerpenguins)
penguins_species <- penguins %>%
group_by(species) %>%
summarise(mean_flipper_length = mean(flipper_length_mm, na.rm = TRUE),
n = n())
penguins_species
medal_counts
knitr::kable(penguins_species)
knitr::kable(medal_counts)
athletes
medal_counts <- athletes %>%
filter(Sport == Judo)
medal_counts <- athletes %>%
filter(Sport == "Judo")
judo_athletes <- athletes %>%
filter(Sport == "Judo")
judo_athletes
knitr::kable(judo_athletes)
str(athletes)
judo_athletes <- athletes %>%
filter(Sport == "Judo") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
knitr::kable(judo_athletes)
unique(athletes$Sport)
judo_athletes <- athletes %>%
filter(Sport == "Rugby Sevens") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
judo_athletes
rugby_athletes <- athletes %>%
filter(Sport == "Rugby Sevens") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
rugby_athletes
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Deutschland") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
knitr::kable(judo_athletes_ger)
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Deutschland") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
judo_athletes_ger
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Germany") %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
judo_athletes_ger
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Germany", !is.na(Medal)) %>%
select(Name, Sex, Age, Height, Weight, Region, Medal )
judo_athletes_ger
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Germany", !is.na(Medal)) %>%
select(Year, Name, Sex, Age, Height, Weight, Region, Medal )
judo_athletes_ger
judo_athletes_ger <- athletes %>%
filter(Sport == "Judo", Region == "Germany", !is.na(Medal)) %>%
select(Year, Name, Sex, Age, Height, Weight, Region, Medal ) %>%
arrange(Year, Sex)
judo_athletes_ger
knitr::kable(judo_athletes_ger)
#| echo: false
#| message: false
#| label: tbl-penguins
#| tbl-cap: Table with penguins species flipper length.
library(rempsyc)
nice_table(
judo_athletes_ger
)
judo_athletes_ger
p <- ggplot(
data = best_by_sport,
aes(
x = Sport,
y = n
)
) +
geom_col(aes(fill = Region, x = reorder(Sport, n))) +
geom_point()
best_by_sport <- athletes %>%
## Get all gold medalists
filter(Medal == "Gold") %>%
## Group them by sport and region
group_by(Sport, Region) %>%
## count the number of medals each country has per sport category
count(Medal) %>%
## Now only group by sport, so we can extract the maximum medal row by sport, and not by sport and country
group_by(Sport) %>%
## Extract the country with the most medals
slice(which.max(n))
p <- ggplot(
data = best_by_sport,
aes(
x = Sport,
y = n
)
) +
geom_col(aes(fill = Region, x = reorder(Sport, n))) +
geom_point()
p
best_by_sport <- athletes %>%
## Get all gold medalists
filter(Medal == "Gold") %>%
## Group them by sport and region
group_by(Sport, Region) %>%
## count the number of medals each country has per sport category
count(Medal) %>%
## Now only group by sport, so we can extract the maximum medal row by sport, and not by sport and country
group_by(Sport) %>%
## Extract the country with the most medals
slice(which.max(n))
p <- ggplot(
data = best_by_sport,
aes(
x = Sport,
y = n
)
) +
geom_col(aes(fill = Region, x = reorder(Sport, n))) +
geom_text(aes(label = Region), hjust = -0.3, angle = 90, size = 2.5) +
theme_classic() +
## And turn the axis labels again, because the new theme has overwritten our theme
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
## Specify which colors are used for the filling. They are from the package viridsLite, so you might need to install it.
scale_fill_manual(values = viridisLite::viridis(19))
p
best_by_sport <- athletes %>%
## Get all gold medalists
filter(Medal == "Gold") %>%
## Group them by sport and region
group_by(Sport, Region) %>%
## count the number of medals each country has per sport category
count(Medal) %>%
## Now only group by sport, so we can extract the maximum medal row by sport, and not by sport and country
group_by(Sport) %>%
## Extract the country with the most medals
slice(which.max(n))
p <- ggplot(
data = best_by_sport,
aes(
x = Sport,
y = n
)
) +
geom_col(aes(fill = Region, x = reorder(Sport, n))) +
geom_text(aes(label = Region), hjust = -0.3, angle = 90, size = 2.5) +
theme_classic() +
## And turn the axis labels again, because the new theme has overwritten our theme
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
## Specify which colors are used for the filling. They are from the package viridsLite, so you might need to install it.
scale_fill_manual(values = viridisLite::viridis(19)) +
ggtitle("Country with the most Olympic gold medal winners by sport") +
xlab("Sport") +
ylab("Number of gold medal winners")
p
install.packages("styler")
library(styler)
style_file()
style_file("./posts/r_sig/24_07_15_quarto_1/index.qmd")
