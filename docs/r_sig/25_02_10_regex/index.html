<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-10-02">
<meta name="description" content="R-SIG 10.02.2025">

<title>Regular expressions – IQB Methods Team</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-453bbb6d1d9cb7fba2a81fb4686694e5.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
<meta property="og:title" content="Regular expressions – IQB Methods Team">
<meta property="og:description" content="R-SIG 10.02.2025">
<meta property="og:image" content="https://iqb-research.github.io/IQB-Methods/docs/r_sig/25_02_10_regex/expression.jpg">
<meta property="og:site_name" content="IQB Methods Team">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">IQB Methods Team</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../posts_eat.html"> 
<span class="menu-text">eat Packages</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../posts_learn.html"> 
<span class="menu-text">learn</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../posts_newsletter.html"> 
<span class="menu-text">Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../posts_help.html"> 
<span class="menu-text">help</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../../index.xml"> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#selecting-patterns" id="toc-selecting-patterns" class="nav-link" data-scroll-target="#selecting-patterns">Selecting patterns</a></li>
  <li><a href="#manipulating-patterns" id="toc-manipulating-patterns" class="nav-link" data-scroll-target="#manipulating-patterns">Manipulating patterns</a></li>
  </ul></li>
  <li><a href="#metacharachters" id="toc-metacharachters" class="nav-link" data-scroll-target="#metacharachters">Metacharachters</a>
  <ul class="collapse">
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><code>.</code></a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"><code>?</code></a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"><code>+</code></a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"><code>*</code></a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"><code>[]</code></a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"><code>|</code></a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"><code>^</code></a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"><code>$</code></a></li>
  <li><a href="#other-predefined-classes" id="toc-other-predefined-classes" class="nav-link" data-scroll-target="#other-predefined-classes">Other predefined classes:</a></li>
  <li><a href="#escaping" id="toc-escaping" class="nav-link" data-scroll-target="#escaping">Escaping</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"><code>{}</code></a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"><code>()</code></a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping">Grouping</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/iqb-research/IQB-Methods/edit/main/docs/r_sig/25_02_10_regex/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/iqb-research/IQB-Methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Regular expressions</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">R-SIG</div>
    <div class="quarto-category">intro</div>
    <div class="quarto-category">tutorial</div>
  </div>
  </div>

<div>
  <div class="description">
    R-SIG 10.02.2025
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 2, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><img src="expression.jpg" class="img-fluid"><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Regular expressions is a powerful language for describing patterns within strings. Mostly we need that for extracting certain strings for filtering or manipulation. See <a href="https://r4ds.hadley.nz/regexps">R for Data Science</a> for a whole chapter on this. Also, speaking from experience, ChatGPT is a great resource on this, still it might be helpful to understand the underlying syntax a bit better.</p>
<section id="selecting-patterns" class="level2">
<h2 class="anchored" data-anchor-id="selecting-patterns">Selecting patterns</h2>
<p>In base-R we can use <code>grep()</code> for extracting certain patterns from character vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Apple"</span>, <span class="st">"Banana"</span>, <span class="st">"Orange"</span>, <span class="st">"Lemon"</span>, <span class="st">"Blackberry"</span>, <span class="st">"Peach"</span>, <span class="st">"annona"</span>, <span class="st">"peach"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"e"</span>, fruits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 4 5 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>fruits[<span class="fu">grep</span>(<span class="st">"e"</span>, fruits)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Apple"      "Orange"     "Lemon"      "Blackberry" "Peach"     
[6] "peach"     </code></pre>
</div>
</div>
<p>In the tidyverse, we can use <code>str_detect()</code>, which is also easily pipeable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Species, <span class="st">"set"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</section>
<section id="manipulating-patterns" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-patterns">Manipulating patterns</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"e"</span>, <span class="st">"a"</span>, fruits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Appla"      "Banana"     "Oranga"     "Lamon"      "Blackbarry"
[6] "Paach"      "annona"     "paach"     </code></pre>
</div>
</div>
<p>Or, in tidyverse:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(fruits, <span class="st">"e"</span>, <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Appla"      "Banana"     "Oranga"     "Lamon"      "Blackbarry"
[6] "Paach"      "annona"     "paach"     </code></pre>
</div>
</div>
<p>With <code>stringr::str_view()</code> we can see how the chosen characters look without having to use <code>grep()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_view</span>(fruits, <span class="st">"e"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ Appl&lt;e&gt;
[3] │ Orang&lt;e&gt;
[4] │ L&lt;e&gt;mon
[5] │ Blackb&lt;e&gt;rry
[6] │ P&lt;e&gt;ach
[8] │ p&lt;e&gt;ach</code></pre>
</div>
</div>
</section>
</section>
<section id="metacharachters" class="level1">
<h1>Metacharachters</h1>
<p>Letters and numbers just represent themselves, but most punctuation characters have their own meaning:</p>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"><code>.</code></h2>
<p>The point <code>.</code> matches any character. So if we want to extract all fruits with an <code>e</code> and another character following we can do that like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"e."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4] │ L&lt;em&gt;on
[5] │ Blackb&lt;er&gt;ry
[6] │ P&lt;ea&gt;ch
[8] │ p&lt;ea&gt;ch</code></pre>
</div>
</div>
<p>Of course we can use multiple points if necessary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"a..e"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[3] │ Or&lt;ange&gt;</code></pre>
</div>
</div>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"><code>?</code></h2>
<p>With <code>?</code> we can make a pattern optional. In the following example, any letter can preceed or follow the <code>m</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>measures <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"10 mm"</span>, <span class="st">"100 m"</span>, <span class="st">"2 km"</span>, <span class="st">"8 cm"</span>, <span class="st">"100 kg"</span>, <span class="st">"80 g"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(measures, <span class="st">".?m.?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] " mm"

[[2]]
[1] " m"

[[3]]
[1] "km"

[[4]]
[1] "cm"

[[5]]
character(0)

[[6]]
character(0)</code></pre>
</div>
</div>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"><code>+</code></h2>
<p>With the <code>+</code> the pattern has to match at least once (or more often):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(measures, <span class="st">"m+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "mm"

[[2]]
[1] "m"

[[3]]
[1] "m"

[[4]]
[1] "m"

[[5]]
character(0)

[[6]]
character(0)</code></pre>
</div>
</div>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"><code>*</code></h2>
<p>The <code>*</code> makes any number of following matches optional, so the pattern can be repeated any number of times, including 0:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>measures[<span class="fu">grep</span>(<span class="st">"m*"</span>, measures)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "10 mm"  "100 m"  "2 km"   "8 cm"   "100 kg" "80 g"  </code></pre>
</div>
</div>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4"><code>[]</code></h2>
<p>This creates a character class, so any of the included characters can match (or not match, if we put a <code>^</code> in front):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"a[cn]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ B&lt;an&gt;&lt;an&gt;a
[3] │ Or&lt;an&gt;ge
[5] │ Bl&lt;ac&gt;kberry
[6] │ Pe&lt;ac&gt;h
[7] │ &lt;an&gt;nona
[8] │ pe&lt;ac&gt;h</code></pre>
</div>
</div>
<p>This selects all strings including an <code>a</code> followed by either <code>c</code> or <code>n</code>. Alternatively, we can also choose all <code>e</code> followed by a consonant:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"e[^aeiou]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4] │ L&lt;em&gt;on
[5] │ Blackb&lt;er&gt;ry</code></pre>
</div>
</div>
<p>Even better, if we want to match all letters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"ca1"</span>, <span class="st">"x3"</span>, <span class="st">"a"</span>), <span class="st">"[a-z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;c&gt;&lt;a&gt;1
[2] │ &lt;x&gt;3
[3] │ &lt;a&gt;</code></pre>
</div>
</div>
<p>… followed by a number:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"ca1"</span>, <span class="st">"x3"</span>, <span class="st">"3a"</span>), <span class="st">"[a-z][0-9]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ c&lt;a1&gt;
[2] │ &lt;x3&gt;</code></pre>
</div>
</div>
<p>… also starting with a letter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"ca1"</span>, <span class="st">"x3"</span>, <span class="st">"3a"</span>), <span class="st">"^[a-z][0-9]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ &lt;x3&gt;</code></pre>
</div>
</div>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5"><code>|</code></h2>
<p>This is our ‘or’-symbol:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"an|ea"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ B&lt;an&gt;&lt;an&gt;a
[3] │ Or&lt;an&gt;ge
[6] │ P&lt;ea&gt;ch
[7] │ &lt;an&gt;nona
[8] │ p&lt;ea&gt;ch</code></pre>
</div>
</div>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6"><code>^</code></h2>
<p>Matches the start:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"ba"</span>, <span class="st">"ab"</span>), <span class="st">"^b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;b&gt;a</code></pre>
</div>
</div>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7"><code>$</code></h2>
<p>Matches the end:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">"ba"</span>, <span class="st">"ab"</span>), <span class="st">"b$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ a&lt;b&gt;</code></pre>
</div>
</div>
</section>
<section id="other-predefined-classes" class="level2">
<h2 class="anchored" data-anchor-id="other-predefined-classes">Other predefined classes:</h2>
<ul>
<li><code>\d</code>: Match digit</li>
<li><code>\D</code>: Match anything but digits</li>
<li><code>\s</code>: Match any whitespace</li>
<li><code>\S</code>: Match anything but whitespace</li>
<li><code>\w</code>: Match any “word”-character (letters and numbers)</li>
<li><code>\W</code>: Match any “non-word”-character.</li>
<li>Finally, the function <code>tolower()</code> might be helpful to convert Upper case letters to lower case letters.</li>
</ul>
</section>
<section id="escaping" class="level2">
<h2 class="anchored" data-anchor-id="escaping">Escaping</h2>
<p>If we want to use the actual character instead of its meta-function, we have to escape it (with two <code>\</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>char_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"+?"</span>, <span class="st">"ab"</span>, <span class="st">"34.+"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(char_vec, <span class="st">"</span><span class="sc">\\</span><span class="st">+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;+&gt;?
[3] │ 34.&lt;+&gt;</code></pre>
</div>
</div>
<p>For matching a <code>\</code>, we need to escape it in the string first, and then match it with four <code>\</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"a</span><span class="sc">\\</span><span class="st">b"</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ a&lt;\&gt;b</code></pre>
</div>
</div>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8"><code>{}</code></h2>
<p><code>{}</code> allows us to specify the number of matches we are looking for:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"p{2}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ A&lt;pp&gt;le</code></pre>
</div>
</div>
<p>Or a minimum number:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"p{1,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ A&lt;pp&gt;le
[8] │ &lt;p&gt;each</code></pre>
</div>
</div>
</section>
<section id="section-9" class="level2">
<h2 class="anchored" data-anchor-id="section-9"><code>()</code></h2>
<p><code>()</code> can help us to clarify how the meta-expressions should relate to each other:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"(an){2}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ B&lt;anan&gt;a</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Instead of:</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"an{2}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7] │ &lt;ann&gt;ona</code></pre>
</div>
</div>
<p>In the second example, the <code>{2}</code> relates only to the <code>n</code>, in the first to the <code>an</code> pattern.</p>
</section>
<section id="grouping" class="level2">
<h2 class="anchored" data-anchor-id="grouping">Grouping</h2>
<p>Using paranthesis, we can also create groups which we can use later on in the regex:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"(.)</span><span class="sc">\\</span><span class="st">1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ A&lt;pp&gt;le
[5] │ Blackbe&lt;rr&gt;y
[7] │ a&lt;nn&gt;ona</code></pre>
</div>
</div>
<p>This selects all fruits that have a double letter. With the <code>\\1</code> we use the content of the first <code>()</code>,which can be any letter in this example (but has to be the same as in the first selection). We can also use multiple groups:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(fruits, <span class="st">"(.)(n)</span><span class="sc">\\</span><span class="st">1</span><span class="sc">\\</span><span class="st">2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2] │ B&lt;anan&gt;a</code></pre>
</div>
</div>
</section>
</section>
<section id="exercises" class="level1">
<h1>Exercises</h1>
<ol type="1">
<li>What does the following regex code do?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>sentences[<span class="fu">grep</span>(<span class="st">"^A"</span>, sentences)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sentences, <span class="st">"[0-9]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sentences, <span class="st">"^[TA]|y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sentences, <span class="st">"(.*[n]){5}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Extract all sentences that end with <code>ing.</code> from <code>string::sentences</code>.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"ing</span><span class="sc">\\</span><span class="st">.$"</span>, sentences, <span class="at">value =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "The source of the huge river is the clear spring."
 [2] "A pot of tea helps to pass the evening."          
 [3] "It snowed, rained, and hailed the same morning."  
 [4] "What joy there is in living."                     
 [5] "The pearl was worn in a thin silver ring."        
 [6] "Bail the boat to stop it from sinking."           
 [7] "The map had an X that meant nothing."             
 [8] "Try to trace the fine lines of the painting."     
 [9] "We now have a new base for shipping."             
[10] "The black trunk fell from the landing."           
[11] "Set the piece here and say nothing."              
[12] "The first part of the plan needs changing."       </code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Count the number of occurrences of each letter in <code>sentences</code>.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(sentences, <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Freq))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   . Freq
1  e 3050
2  t 2350
3  a 1751
4  h 1655
5  s 1585
6  o 1562
7  r 1356
8  n 1220
9  i 1204
10 l  999
11 d  949
12 c  604
13 w  601
14 f  563
15 u  528
16 p  491
17 g  425
18 m  402
19 b  370
20 k  327
21 y  299
22 v  140
23 j   39
24 z   30
25 x   27
26 q   18</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Extract all numbers:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>recipe <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2 Apples"</span>, <span class="st">"6 Bananas"</span>, <span class="st">"500 g sugar"</span>, <span class="st">"1 kg flour"</span>, <span class="st">"500 ml milk"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(recipe, <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "2"

[[2]]
[1] "6"

[[3]]
[1] "500"

[[4]]
[1] "1"

[[5]]
[1] "500"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(recipe, <span class="st">"[0-9]+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "2"

[[2]]
[1] "6"

[[3]]
[1] "500"

[[4]]
[1] "1"

[[5]]
[1] "500"</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Extract all Sentences from <code>sentences</code> that include a double letter.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>sentences[<span class="fu">grep</span>(<span class="st">"(.)</span><span class="sc">\\</span><span class="st">1"</span>, sentences)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "The birch canoe slid on the smooth planks."               
  [2] "Glue the sheet to the dark blue background."              
  [3] "It's easy to tell the depth of a well."                   
  [4] "The hogs were fed chopped corn and garbage."              
  [5] "A large size in stockings is hard to sell."               
  [6] "Kick the ball straight and follow through."               
  [7] "Help the woman get back to her feet."                     
  [8] "A pot of tea helps to pass the evening."                  
  [9] "The soft cushion broke the man's fall."                   
 [10] "The salt breeze came across from the sea."                
 [11] "The girl at the booth sold fifty bonds."                  
 [12] "The small pup gnawed a hole in the sock."                 
 [13] "The fish twisted and turned on the bent hook."            
 [14] "Press the pants and sew a button on the vest."            
 [15] "The beauty of the view stunned the young boy."            
 [16] "Her purse was full of useless trash."                     
 [17] "The colt reared and threw the tall rider."                
 [18] "Wipe the grease off his dirty face."                      
 [19] "The stray cat gave birth to kittens."                     
 [20] "The meal was cooked before the bell rang."                
 [21] "The ship was torn apart on the sharp reef."               
 [22] "Sickness kept him home the third week."                   
 [23] "The wide road shimmered in the hot sun."                  
 [24] "The lazy cow lay in the cool grass."                      
 [25] "The rope will bind the seven books at once."              
 [26] "Mesh wire keeps chicks inside."                           
 [27] "The frosty air passed through the coat."                  
 [28] "The crooked maze failed to fool the mouse."               
 [29] "Adding fast leads to wrong sums."                         
 [30] "A saw is a tool used for making boards."                  
 [31] "The wagon moved on well oiled wheels."                    
 [32] "March the soldiers past the next hill."                   
 [33] "A cup of sugar makes sweet fudge."                        
 [34] "A small creek cut across the field."                      
 [35] "Cars and busses stalled in snow drifts."                  
 [36] "The set of china hit the floor with a crash."             
 [37] "The walled town was seized without a fight."              
 [38] "The lease ran out in sixteen weeks."                      
 [39] "A tame squirrel makes a nice pet."                        
 [40] "The horn of the car woke the sleeping cop."               
 [41] "The fruit peel was cut in thick slices."                  
 [42] "The Navy attacked the big task force."                    
 [43] "See the cat glaring at the scared mouse."                 
 [44] "The hat brim was wide and too droopy."                    
 [45] "The grass curled around the fence post."                  
 [46] "Always close the barn door tight."                        
 [47] "The slush lay deep along the street."                     
 [48] "A pound of sugar costs more than eggs."                   
 [49] "The play seems dull and quite stupid."                    
 [50] "The bill was paid every third week."                      
 [51] "Open the crate but don't break the glass."                
 [52] "Add the sum to the product of these three."               
 [53] "The ripe taste of cheese improves with age."              
 [54] "Act on these orders with great speed."                    
 [55] "The bark of the pine tree was shiny and dark."            
 [56] "Leaves turn brown and yellow in the fall."                
 [57] "The pennant waved when the wind blew."                    
 [58] "Hemp is a weed found in parts of the tropics."            
 [59] "Type out three lists of orders."                          
 [60] "The harder he tried the less he got done."                
 [61] "The boss ran the show with a watchful eye."               
 [62] "The cup cracked and spilled its contents."                
 [63] "Paste can cleanse the most dirty brass."                  
 [64] "The slang word for raw whiskey is booze."                 
 [65] "The wharf could be seen at the farther shore."            
 [66] "Feel the heat of the weak dying flame."                   
 [67] "The tiny girl took off her hat."                          
 [68] "A cramp is no small danger on a swim."                    
 [69] "Two plus seven is less than ten."                         
 [70] "The glow deepened in the eyes of the sweet girl."         
 [71] "Clothes and lodging are free to new men."                 
 [72] "Guess the result from the first scores."                  
 [73] "Pure bred poodles have curls."                            
 [74] "The tree top waved in a graceful way."                    
 [75] "The spot on the blotter was made by green ink."           
 [76] "Mud was spattered on the front of his white shirt."       
 [77] "The empty flask stood on the tin tray."                   
 [78] "A speedy man can beat this track mark."                   
 [79] "The coffee stand is too high for the couch."              
 [80] "The pencils have all been used."                          
 [81] "Drop the two when you add the figures."                   
 [82] "Wood is best for making toys and blocks."                 
 [83] "The office paint was a dull, sad tan."                    
 [84] "He knew the skill of the great young actress."            
 [85] "A rag will soak up spilled water."                        
 [86] "A shower of dirt fell from the hot pipes."                
 [87] "Steam hissed from the broken valve."                      
 [88] "The child almost hurt the small dog."                     
 [89] "Torn scraps littered the stone floor."                    
 [90] "Sunday is the best part of the week."                     
 [91] "The doctor cured him with these pills."                   
 [92] "The new girl was fired today at noon."                    
 [93] "They felt gay when the ship arrived in port."             
 [94] "Add the store's account to the last cent."                
 [95] "Acid burns holes in wool cloth."                          
 [96] "Eight miles of woodland burned to waste."                 
 [97] "The third act was dull and tired the players."            
 [98] "A young child should not suffer fright."                  
 [99] "Add the column and put the sum here."                     
[100] "We admire and love a good cook."                          
[101] "There the flood mark is ten inches."                      
[102] "The fruit of a fig tree is apple shaped."                 
[103] "The paper box is full of thumb tacks."                    
[104] "Sell your gift to a buyer at a good gain."                
[105] "The petals fall with the next puff of wind."              
[106] "Bring your best compass to the third class."              
[107] "The brown house was on fire to the attic."                
[108] "A blue crane is a tall wading bird."                      
[109] "A fresh start will work such wonders."                    
[110] "The hostess taught the new maid to serve."                
[111] "He wrote his last novel there at the inn."                
[112] "Even the worst will beat his low score."                  
[113] "The loss of the second ship was hard to take."            
[114] "The fly made its way along the wall."                     
[115] "Do that with a wooden stick."                             
[116] "The doorknob was made of bright clean brass."             
[117] "The wreck occurred by the bank on Main Street."           
[118] "Schools for ladies teach charm and grace."                
[119] "The lamp shone with a steady green flame."                
[120] "They took the axe and the saw to the forest."             
[121] "The ancient coin was quite dull and worn."                
[122] "The shaky barn fell with a loud crash."                   
[123] "Jazz and swing fans like fast music."                     
[124] "Rake the rubbish up and then burn it."                    
[125] "Slash the gold cloth into fine ribbons."                  
[126] "They are pushed back each time they attack."              
[127] "Whitings are small fish caught in nets."                  
[128] "Jerk the rope and the bell rings weakly."                 
[129] "A waxed floor makes us lose balance."                     
[130] "On the islands the sea breeze is soft and mild."          
[131] "The play began as soon as we sat down."                   
[132] "This will lead the world to more sound and fury."         
[133] "Add salt before you fry the egg."                         
[134] "The birch looked stark white and lonesome."               
[135] "The box is held by a bright red snapper."                 
[136] "To make pure ice, you freeze water."                      
[137] "The first worm gets snapped early."                       
[138] "Jump the fence and hurry up the bank."                    
[139] "Yell and clap as the curtain slides back."                
[140] "They are men who walk the middle of the road."            
[141] "In some form or other we need fun."                       
[142] "The prince ordered his head chopped off."                 
[143] "Ducks fly north but lack a compass."                      
[144] "Fruit flavors are used in fizz drinks."                   
[145] "These pills do less good than others."                    
[146] "Canned pears lack full flavor."                           
[147] "Carry the pail to the wall and spill it there."           
[148] "The rude laugh filled the empty room."                    
[149] "High seats are best for football fans."                   
[150] "A dash of pepper spoils beef stew."                       
[151] "A zestful food is the hot-cross bun."                     
[152] "The horse trotted around the field at a brisk pace."      
[153] "The red tape bound the smuggled food."                    
[154] "Look in the corner to find the tan shirt."                
[155] "The cold drizzle will halt the bond drive."               
[156] "The junk yard had a mouldy smell."                        
[157] "The flint sputtered and lit a pine torch."                
[158] "All sat frozen and watched the screen."                   
[159] "To reach the end he needs much courage."                  
[160] "A ridge on a smooth surface is a bump or flaw."           
[161] "Hedge apples may stain your hands green."                 
[162] "The mute muffled the high tones of the horn."             
[163] "The heap of fallen leaves was set on fire."               
[164] "His shirt was clean but one button was gone."             
[165] "The barrel of beer was a brew of malt and hops."          
[166] "The plant grew large and green in the window."            
[167] "The beam dropped down on the workman's head."             
[168] "Pink clouds floated with the breeze."                     
[169] "She danced like a swan, tall and graceful."               
[170] "The tube was blown and the tire flat and useless."        
[171] "It is late morning on the old wall clock."                
[172] "Let's all join as we sing the last chorus."               
[173] "The last switch cannot be turned off."                    
[174] "The fight will end in just six minutes."                  
[175] "The store walls were lined with colored frocks."          
[176] "The peace league met to discuss their plans."             
[177] "The quick fox jumped on the sleeping cat."                
[178] "The nozzle of the fire hose was bright brass."            
[179] "Screw the round cap on as tight as needed."               
[180] "Fill the ink jar with sticky glue."                       
[181] "We need grain to keep our mules healthy."                 
[182] "The crunch of feet in the snow was the only sound."       
[183] "The copper bowl shone in the sun's rays."                 
[184] "Boards will warp unless kept dry."                        
[185] "The plush chair leaned against the wall."                 
[186] "Glass will clink when struck by metal."                   
[187] "Bathe and relax in the cool green grass."                 
[188] "Nine rows of soldiers stood in a line."                   
[189] "The beach is dry and shallow at low tide."                
[190] "The kitten chased the dog down the street."               
[191] "Pages bound in cloth make a book."                        
[192] "Women form less than half of the group."                  
[193] "A gem in the rough needs work to polish."                 
[194] "He used the lathe to make brass objects."                 
[195] "The clan gathered on each dull night."                    
[196] "Tack the strip of carpet to the worn floor."              
[197] "Each penny shone like new."                               
[198] "The man went to the woods to gather sticks."              
[199] "The logs fell and tumbled into the clear stream."         
[200] "Brass rings are sold by these natives."                   
[201] "It takes a good trap to capture a bear."                  
[202] "Feed the white mouse some flower seeds."                  
[203] "The thaw came early and freed the stream."                
[204] "He took the lead and kept it the whole distance."         
[205] "The key you designed will fit the lock."                  
[206] "Plead to the council to free the poor thief."             
[207] "Better hash is made of rare beef."                        
[208] "Tend the sheep while the dog wanders."                    
[209] "A sash of gold silk will trim her dress."                 
[210] "A siege will crack the strong defense."                   
[211] "Grape juice and water mix well."                          
[212] "Fake stones shine but cost little."                       
[213] "Much of the story makes good sense."                      
[214] "A lathe cuts and trims any wood."                         
[215] "His hip struck the knee of the next player."              
[216] "The stale smell of old beer lingers."                     
[217] "The desk was firm on the shaky floor."                    
[218] "Beef is scarcer than some lamb."                          
[219] "Raise the sail and steer the ship northward."             
[220] "No cement will hold hard wood."                           
[221] "We now have a new base for shipping."                     
[222] "The sheep were led home by a dog."                        
[223] "Three for a dime, the young peddler cried."               
[224] "The sense of smell is better than that of touch."         
[225] "No hardship seemed to make him sad."                      
[226] "The news struck doubt into restless minds."               
[227] "Once we stood beside the shore."                          
[228] "A chink in the wall allowed a draft to blow."             
[229] "He takes the oath of office each March."                  
[230] "The sand drifts over the sills of the old house."         
[231] "The point of the steel pen was bent and twisted."         
[232] "There is a lag between thought and act."                  
[233] "Seed is needed to plant the spring corn."                 
[234] "The chap slipped into the crowd and was lost."            
[235] "Hats are worn to tea and not to dinner."                  
[236] "Screen the porch with woven straw mats."                  
[237] "This horse will nose his way to the finish."              
[238] "The dry wax protects the deep scratch."                   
[239] "He picked up the dice for a second roll."                 
[240] "These coins will be needed to pay his debt."              
[241] "The nag pulled the frail cart along."                     
[242] "The smell of burned rags itches my nose."                 
[243] "New pants lack cuffs and pockets."                        
[244] "The marsh will freeze when cold enough."                  
[245] "The bloom of the rose lasts a few days."                  
[246] "Bottles hold four kinds of rum."                          
[247] "He wheeled the bike past the winding road."               
[248] "A clean neck means a neat collar."                        
[249] "The couch cover and hall drapes were blue."               
[250] "The stems of the tall glasses cracked and broke."         
[251] "The wall phone rang loud and often."                      
[252] "The clothes dried on a thin wooden rack."                 
[253] "The cleat sank deeply into the soft turf."                
[254] "The bills were mailed promptly on the tenth of the month."
[255] "To have is better than to wait and hope."                 
[256] "The price is fair for a good antique clock."              
[257] "The bunch of grapes was pressed into wine."               
[258] "He sent the figs, but kept the ripe cherries."            
[259] "The hinge on the door creaked with old age."              
[260] "The screen before the fire kept in the sparks."           
[261] "Fly by night and you waste little time."                  
[262] "Thick glasses helped him read the print."                 
[263] "The chair looked strong but had no bottom."               
[264] "A fur muff is stylish once more."                         
[265] "The tin box held priceless stones."                       
[266] "We need an end of all such matter."                       
[267] "The case was puzzling to the old and wise."               
[268] "The youth drove with zest, but little skill."             
[269] "Five years he lived with a shaggy dog."                   
[270] "Crack the walnut with your sharp side teeth."             
[271] "He offered proof in the form of a large chart."           
[272] "Send the stuff in a thick paper bag."                     
[273] "The three story house was built of stone."                
[274] "In the rear of the ground floor was a large passage."     
[275] "Oats are a food eaten by horse and man."                  
[276] "Their eyelids droop for want of sleep."                   
[277] "Tuck the sheet under the edge of the mat."                
[278] "We like to see clear weather."                            
[279] "The work of the tailor is seen on each side."             
[280] "Take a chance and win a china doll."                      
[281] "The square wooden crate was packed to be shipped."        
[282] "The dusty bench stood by the stone wall."                 
[283] "We dress to suit the weather of most days."               
[284] "A bowl of rice is free with chicken stew."                
[285] "The water in this well is a source of good health."       
[286] "Take shelter in this tent, but keep still."               
[287] "That guy is the writer of a few banned books."            
[288] "The little tales they tell are false."                    
[289] "The door was barred, locked, and bolted as well."         
[290] "Ripe pears are fit for a queen's table."                  
[291] "The kite dipped and swayed, but stayed aloft."            
[292] "The pleasant hours fly by much too soon."                 
[293] "The room was crowded with a wild mob."                    
[294] "This strong arm shall shield your honor."                 
[295] "The beetle droned in the hot June sun."                   
[296] "Press the pedal with your left foot."                     
[297] "The black trunk fell from the landing."                   
[298] "The bank pressed for payment of the debt."                
[299] "A strong bid may scare your partner stiff."               
[300] "Even a just cause needs power to win."                    
[301] "Peep under the tent and see the clowns."                  
[302] "A thing of small note can cause despair."                 
[303] "Flood the mails with requests for this book."             
[304] "A thick coat of black paint covered all."                 
[305] "He wrote his name boldly at the top of the sheet."        
[306] "Dill pickles are sour but taste fine."                    
[307] "Either mud or dust are found at all times."               
[308] "If you mumble your speech will be lost."                  
[309] "At night the alarm roused him from a deep sleep."         
[310] "Fill your pack with bright trinkets for the poor."        
[311] "The small red neon lamp went out."                        
[312] "Clams are small, round, soft, and tasty."                 
[313] "Breathe deep and smell the piny air."                     
[314] "It matters not if he reads these words or those."         
[315] "A toad and a frog are hard to tell apart."                
[316] "A break in the dam almost caused a flood."                
[317] "Paint the sockets in the wall dull green."                
[318] "The child crawled into the dense grass."                  
[319] "Trample the spark, else the flames will spread."          
[320] "A round hole was drilled through the thin board."         
[321] "Footprints showed the path he took up the beach."         
[322] "Prod the old mule with a crooked stick."                  
[323] "It is a band of steel three inches wide."                 
[324] "It was hidden from sight by a mass of leaves and shrubs." 
[325] "The weight of the package was seen on the high scale."    
[326] "Wake and rise, and step into the green outdoors."         
[327] "The green light in the brown box flickered."              
[328] "The brass tube circled the high wall."                    
[329] "Hold the hammer near the end to drive the nail."          
[330] "They took their kids from the public school."             
[331] "Drive the screw straight into the wood."                  
[332] "Keep the hatch tight and the watch constant."             
[333] "Paper will dry out when wet."                             
[334] "A sullen smile gets few friends."                         
[335] "Slide the tray across the glass top."                     
[336] "Light maple makes for a swell room."                      
[337] "Dull stories make her laugh."                             
[338] "A stiff cord will do to fasten your shoe."                
[339] "Choose between the high road and the low."                
[340] "A plea for funds seems to come again."                    
[341] "He lent his coat to the tall gaunt stranger."             
[342] "There is a strong chance it will happen once more."       
[343] "Greet the new guests and leave quickly."                  
[344] "Sweet words work better than fierce."                     
[345] "A thin stripe runs down the middle."                      
[346] "The ram scared the school children off."                  
[347] "The team with the best timing looks good."                
[348] "The farmer swapped his horse for a brown ox."             
[349] "Sit on the perch and tell the others what to do."         
[350] "A steep trail is painful for our feet."                   
[351] "Green moss grows on the northern side."                   
[352] "Tea in thin china has a sweet taste."                     
[353] "Pitch the straw through the door of the stable."          
[354] "The latch on the back gate needed a nail."                
[355] "The goose was brought straight from the old market."      
[356] "A whiff of it will cure the most stubborn cold."          
[357] "She flaps her cape as she parades the street."            
[358] "The loss of the cruiser was a blow to the fleet."         
[359] "Loop the braid to the left and then over."                
[360] "Calves thrive on tender spring grass."                    
[361] "Post no bills on this office wall."                       
[362] "Tear a thin sheet from the yellow pad."                   
[363] "A cruise in warm waters in a sleek yacht is fun."         
[364] "It was done before the boy could see it."                 
[365] "Crouch before you jump or miss the mark."                 
[366] "The square peg will settle in the round hole."            
[367] "Poached eggs and tea must suffice."                       
[368] "Bad nerves are jangled by a door slam."                   
[369] "Ship maps are different from those for planes."           
[370] "Dimes showered down from all sides."                      
[371] "The horse balked and threw the tall rider."               
[372] "The hitch between the horse and cart broke."              
[373] "The roof should be tilted at a sharp slant."              
[374] "A smatter of French is worse than none."                  
[375] "The mule trod the treadmill day and night."               
[376] "Cod is the main business of the north shore."             
[377] "Cap the jar with a tight brass cover."                    
[378] "The poor boy missed the boat again."                      
[379] "A round mat will cover the dull spot."                    
[380] "The first part of the plan needs changing."               
[381] "A good book informs of what we ought to know."            
[382] "The mail comes in three batches per day."                 
[383] "You cannot brew tea in a cold pot."                       
[384] "See the player scoot to third base."                      
[385] "Slide the bill between the two leaves."                   
[386] "We don't like to admit our small faults."                 
[387] "Dig deep in the earth for pirate's gold."                 
[388] "A flat pack takes less luggage space."                    
[389] "Green ice frosted the punch bowl."                        
[390] "A stuffed chair slipped from the moving van."             
[391] "The stitch will serve but needs to be shortened."         
[392] "A thin book fits in the side pocket."                     
[393] "The gloss on top made it unfit to read."                  
[394] "The hail pattered on the burnt brown grass."              
[395] "Seven seals were stamped on great sheets."                
[396] "Our troops are set to strike heavy blows."                
[397] "The store was jammed before the sale could start."        
[398] "It was a bad error on the part of the new judge."         
[399] "One step more and the board will collapse."               
[400] "The pot boiled but the contents failed to jell."          
[401] "The baby puts his right foot in his mouth."               
[402] "The streets are narrow and full of sharp turns."          
[403] "Open your book to the first page."                        
[404] "Fish evade the net and swim off."                         
[405] "Dip the pail once and let it settle."                     
[406] "Will you please answer that phone."                       
[407] "The big red apple fell to the ground."                    
[408] "He sent the boy on a short errand."                       
[409] "Leave now and you will arrive on time."                   
[410] "The corner store was robbed last night."                  
[411] "A gold ring will please most any girl."                   
[412] "The long journey home took a year."                       
[413] "A pink shell was found on the sandy beach."               
[414] "Small children came to see him."                          
[415] "The grass and bushes were wet with dew."                  
[416] "She called his name many times."                          
[417] "When you hear the bell, come quickly."                    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(sentences, <span class="st">"(.)</span><span class="sc">\\</span><span class="st">1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ The birch canoe slid on the sm&lt;oo&gt;th planks.
 [2] │ Glue the sh&lt;ee&gt;t to the dark blue background.
 [3] │ It's easy to te&lt;ll&gt; the depth of a we&lt;ll&gt;.
 [8] │ The hogs were fed cho&lt;pp&gt;ed corn and garbage.
[10] │ A large size in stockings is hard to se&lt;ll&gt;.
[14] │ Kick the ba&lt;ll&gt; straight and fo&lt;ll&gt;ow through.
[15] │ Help the woman get back to her f&lt;ee&gt;t.
[16] │ A pot of tea helps to pa&lt;ss&gt; the evening.
[18] │ The soft cushion broke the man's fa&lt;ll&gt;.
[19] │ The salt br&lt;ee&gt;ze came acro&lt;ss&gt; from the sea.
[20] │ The girl at the b&lt;oo&gt;th sold fifty bonds.
[21] │ The sma&lt;ll&gt; pup gnawed a hole in the sock.
[22] │ The fish twisted and turned on the bent h&lt;oo&gt;k.
[23] │ Pre&lt;ss&gt; the pants and sew a bu&lt;tt&gt;on on the vest.
[25] │ The beauty of the view stu&lt;nn&gt;ed the young boy.
[27] │ Her purse was fu&lt;ll&gt; of usele&lt;ss&gt; trash.
[28] │ The colt reared and threw the ta&lt;ll&gt; rider.
[34] │ Wipe the grease o&lt;ff&gt; his dirty face.
[37] │ The stray cat gave birth to ki&lt;tt&gt;ens.
[39] │ The meal was c&lt;oo&gt;ked before the be&lt;ll&gt; rang.
... and 397 more</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="6" type="1">
<li>Count the number of occurrences of each word that ends with <code>all</code> in <code>sentences</code>.</li>
</ol>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(sentences, <span class="st">" [a-z]+(a)(l)</span><span class="sc">\\</span><span class="st">2"</span> ) <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  unlist <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
     ball      call      fall  football      hall     shall     small     stall 
        1         1         4         1         1         2         9         1 
     tall      wall 
        6        12 </code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="7" type="1">
<li>Download and read into R the text file <a href="https://github.com/iqb-research/IQB-Methods/blob/main/docs/r_sig/25_02_10_regex/faust.txt"><code>faust.txt</code></a>. Plot the 50 most common words in Goethes Faust.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use <code>readLines</code> for reading in <code>.txt</code> files.<br>
You might want to look in the examples of the <code>str_extract_all()</code> documentation. It might help with extracting words!</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>faust <span class="ot">&lt;-</span> <span class="fu">readLines</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"docs"</span>, <span class="st">"r_sig"</span>, <span class="st">"25_02_10_regex"</span>, <span class="st">"faust.txt"</span>), <span class="at">warn =</span> <span class="cn">FALSE</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>word_count <span class="ot">&lt;-</span> <span class="fu">str_extract_all</span>(faust, <span class="fu">boundary</span>(<span class="st">"word"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() </span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>word_count <span class="ot">&lt;-</span> <span class="fu">tolower</span>(word_count) <span class="sc">%&gt;%</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Freq)) <span class="co"># Sorting by frequency</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(word_count) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Word"</span>, <span class="st">"Count"</span>)</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Word column to character for proper sorting</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>word_count<span class="sc">$</span>Word <span class="ot">&lt;-</span> <span class="fu">as.character</span>(word_count<span class="sc">$</span>Word)</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the top 50 most frequent words</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(word_count  <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">50</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Word, Count), <span class="at">y =</span> Count)) <span class="sc">+</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="co"># Flip for better readability</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 Most Frequent Words in Faust"</span>,</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Words"</span>,</span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<ol start="8" type="1">
<li>Extract the email addresses from the following text:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">"Hello Team,</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="st">Please reach out to John at john.doe96@example.com for project updates. If you have any financial queries, contact Sarah at sarah_finance@company.org.</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="st">For general inquiries, you can email info@business.net or our HR department at hr-department@enterprise.co.uk.</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="st">Best regards,</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="st">Admin Team (admin@corporate.com)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(text, <span class="st">"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+</span><span class="sc">\\</span><span class="st">.[a-zA-Z]{2,}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "john.doe96@example.com"         "sarah_finance@company.org"     
[3] "info@business.net"              "hr-department@enterprise.co.uk"
[5] "admin@corporate.com"           </code></pre>
</div>
</div>
</div>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Image by <a href="https://unsplash.com/de/@bang_gecko?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">verdian chua</a> on <a href="https://unsplash.com/de/fotos/braune-und-weisse-eidechse-auf-brauner-holzoberflache-68hC4vYTSFo?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Unsplash</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/iqb-research\.github\.io\/IQB-Methods\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/iqb-research/IQB-Methods/edit/main/docs/r_sig/25_02_10_regex/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/iqb-research/IQB-Methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>