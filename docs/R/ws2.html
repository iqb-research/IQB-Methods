<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>IQB Methods Team - Data Frames, Listen und Grafiken in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../docs/R/ws3.html" rel="next">
<link href="../../docs/R/ws1.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="IQB Methods Team - Data Frames, Listen und Grafiken in R">
<meta property="og:description" content="">
<meta property="og:site_name" content="IQB Methods Team">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">IQB Methods Team</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts_r_sig.html"> 
<span class="menu-text">R-Sig</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts_newsletter.html"> 
<span class="menu-text">Newsletter</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/FAQ/FAQ.html"> 
<span class="menu-text">FAQ</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-internal-documentation" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Internal Documentation</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-internal-documentation">    
        <li>
    <a class="dropdown-item" href="../../docs/quarto/index.html">
 <span class="dropdown-text">Updating the website</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../docs/discussions/code_conventions.html">
 <span class="dropdown-text">Code-Konventionen</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">R Tutorials</li><li class="breadcrumb-item"><a href="../../docs/R/index.html">Introduction</a></li><li class="breadcrumb-item"><a href="../../docs/R/ws2.html">Data.frames, Listen &amp; Plots</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">R Tutorials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/R/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Material for learning R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://nickhaf.github.io/r_tutorial/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Selfpaced R Workshop</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/R/ws1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Einführung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/R/ws2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data.frames, Listen &amp; Plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/R/ws3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pakete und Daten laden</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Cheat Sheets</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://iqss.github.io/dss-workshops/R/Rintro/base-r-cheat-sheet.pdf" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Base R</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Reproducibility</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/reproduce/renv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The renv-Package</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Asserting Code</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/checkmate/checkmate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Checkmate</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">eat Packages</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Info on eat Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatAnalysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatAnalysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatATA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatATA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatCodebook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatCodebook</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatFDZ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatFDZ</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatGADS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatGADS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatModel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatModel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatPlot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatPlot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatPrep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatPrep</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatRecode.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatRecode</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatRep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatRep</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/eatPackages/eatTools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">eatTools</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">GitHub</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/git/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pull requests with Github</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#datensätze-data.frames" id="toc-datensätze-data.frames" class="nav-link active" data-scroll-target="#datensätze-data.frames">1. Datensätze: data.frames</a>
  <ul class="collapse">
  <li><a href="#zusammenführen-von-data.frames-merging" id="toc-zusammenführen-von-data.frames-merging" class="nav-link" data-scroll-target="#zusammenführen-von-data.frames-merging">1.1 Zusammenführen von data.frames (merging)</a></li>
  <li><a href="#navigation-in-data.frames-subsetting" id="toc-navigation-in-data.frames-subsetting" class="nav-link" data-scroll-target="#navigation-in-data.frames-subsetting">1.2 Navigation in data.frames (subsetting)</a></li>
  <li><a href="#rekodieren-von-variablen-in-data.frames" id="toc-rekodieren-von-variablen-in-data.frames" class="nav-link" data-scroll-target="#rekodieren-von-variablen-in-data.frames">1.3 Rekodieren von Variablen in data.frames</a></li>
  <li><a href="#umstrukturieren-von-data.frames" id="toc-umstrukturieren-von-data.frames" class="nav-link" data-scroll-target="#umstrukturieren-von-data.frames">1.4 Umstrukturieren von data.frames</a></li>
  </ul></li>
  <li><a href="#listen" id="toc-listen" class="nav-link" data-scroll-target="#listen">2. Listen</a>
  <ul class="collapse">
  <li><a href="#subsetting-in-listen" id="toc-subsetting-in-listen" class="nav-link" data-scroll-target="#subsetting-in-listen">2.1 Subsetting in Listen</a></li>
  <li><a href="#merging-von-listen" id="toc-merging-von-listen" class="nav-link" data-scroll-target="#merging-von-listen">2.2 Merging von Listen</a></li>
  <li><a href="#aufheben-der-listenstruktur" id="toc-aufheben-der-listenstruktur" class="nav-link" data-scroll-target="#aufheben-der-listenstruktur">2.3 Aufheben der Listenstruktur</a></li>
  </ul></li>
  <li><a href="#grafiken" id="toc-grafiken" class="nav-link" data-scroll-target="#grafiken">3. Grafiken</a>
  <ul class="collapse">
  <li><a href="#balkendiagramme" id="toc-balkendiagramme" class="nav-link" data-scroll-target="#balkendiagramme">1.1 Balkendiagramme</a></li>
  <li><a href="#die-plot-funktion-und-mehrere-grafiken-neben--oder-untereinander" id="toc-die-plot-funktion-und-mehrere-grafiken-neben--oder-untereinander" class="nav-link" data-scroll-target="#die-plot-funktion-und-mehrere-grafiken-neben--oder-untereinander">1.2 Die <code>plot()</code>-Funktion und mehrere Grafiken neben- oder untereinander</a></li>
  <li><a href="#das-paket-ggplot2" id="toc-das-paket-ggplot2" class="nav-link" data-scroll-target="#das-paket-ggplot2">1.3 Das Paket <code>ggplot2</code></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/iqb-research/IQB-Methods/edit/main/docs/R/ws2.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/iqb-research/IQB-Methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">R Tutorials</li><li class="breadcrumb-item"><a href="../../docs/R/index.html">Introduction</a></li><li class="breadcrumb-item"><a href="../../docs/R/ws2.html">Data.frames, Listen &amp; Plots</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Data Frames, Listen und Grafiken in R</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="datensätze-data.frames" class="level1">
<h1>1. Datensätze: data.frames</h1>
<p>Ein data.frame kann als eine spaltenweise Aneinanderreihung verschiedener Vektoren verstanden werden. Jeder einzelne Vektor kann dabei, wie gehabt, nur Elemente derselben Klasse enthalten; der data.frame selbst kann jedoch Vektoren unterschiedlicher Klasse enthalten. Im folgenden Beispiel wird ein <code>data.frame</code> aus zwei character- und drei numerischen Vektoren erzeugt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ID <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">89045</span>, <span class="dv">43678</span>, <span class="dv">88475</span>, <span class="dv">69781</span>, <span class="dv">88766</span>, <span class="dv">67743</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Onno"</span>, <span class="st">"Stefan"</span>, <span class="st">"Sylvain"</span>, <span class="st">"Annette"</span>, <span class="st">"Marina"</span>, <span class="st">"Eike"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>geschlecht <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"m"</span>,<span class="st">"m"</span>,<span class="st">"m"</span>,<span class="st">"w"</span>,<span class="st">"w"</span>,<span class="st">"m"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>treatment  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>bdi.wert   <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">12.5</span>,<span class="dv">13</span>,<span class="fl">11.75</span>,<span class="fl">9.85</span>,<span class="fl">10.15</span>,<span class="fl">9.95</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>daten      <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ID, name, geschlecht, treatment, bdi.wert, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um sich einen Überblick über den soeben angelegten data.frame zu verschaffen, sind folgende Befehle nützlich:</p>
<ol type="1">
<li>Die ersten Zeilen des Datensatzes werden ausgegeben:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID    name geschlecht treatment bdi.wert
1 89045    Onno          m         0    12.50
2 43678  Stefan          m         1    13.00
3 88475 Sylvain          m         1    11.75
4 69781 Annette          w         1     9.85
5 88766  Marina          w         0    10.15
6 67743    Eike          m         1     9.95</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Die Struktur des Datensatzes wird ausgegeben:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  5 variables:
 $ ID        : num  89045 43678 88475 69781 88766 ...
 $ name      : chr  "Onno" "Stefan" "Sylvain" "Annette" ...
 $ geschlecht: chr  "m" "m" "m" "w" ...
 $ treatment : num  0 1 1 1 0 1
 $ bdi.wert  : num  12.5 13 11.75 9.85 10.15 ...</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Eine Zusammenfassung der Daten wird ausgegeben:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       ID            name            geschlecht          treatment     
 Min.   :43678   Length:6           Length:6           Min.   :0.0000  
 1st Qu.:68252   Class :character   Class :character   1st Qu.:0.2500  
 Median :79128   Mode  :character   Mode  :character   Median :1.0000  
 Mean   :74581                                         Mean   :0.6667  
 3rd Qu.:88693                                         3rd Qu.:1.0000  
 Max.   :89045                                         Max.   :1.0000  
    bdi.wert    
 Min.   : 9.85  
 1st Qu.:10.00  
 Median :10.95  
 Mean   :11.20  
 3rd Qu.:12.31  
 Max.   :13.00  </code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Welche Eigenschaften hat ein Objekt “data.frame”?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
<p>Auf zwei Besonderheiten soll hier kurz eingegangen werden:</p>
<ul>
<li>Warum hat das Objekt <code>daten</code> zwar die Klasse <code>data.frame</code>, aber den Modus <code>list</code>? Der Grund ist, dass in R data.frames “Spezialfälle” von Listen sind, genauso wie man einen Skalar als “Spezialfall” eines Vektors verstehen kann. In R dürfen Listen beliebig viele Elemente beliebigen Typs enthalten. data.frames dürfen mehrere Vektoren <em>gleicher</em> Länge, aber unterschiedlichen Typs (bzw. unterschiedlicher Klasse) enthalten. Ein data.frame ist also eine “eingeschränkte” Liste.</li>
<li>Was bedeutet “stringsAsFactors”? Wird ein data.frame konstruiert, der sich (teilweise) aus character-Variablen zusammensetzt, werden diese in R standardmäßig wie Faktoren behandelt. Das ist dann sinnvoll, wenn diese character-Variablen (wie hier) im Grunde nur Gruppierungsvariablen sind (hier: male, female). In SPSS gibt es für Gruppierungsvariablen die Skalendefinition “nominal”. Typischerweise werden solche Variablen als unabhängige Variablen in Varianzanalysen eingesetzt. Unter “echten” character-Variablen könnte man sich etwa die Freitextantworten in Fragebögen vorstellen. “stringsAsFactors” besagt also: “Soll R diese Variablen wie Faktoren behandeln oder wie echte character-Variablen?”</li>
</ul>
<p>Die Variablen Treatment und Geschlecht könnten auch Faktoren werden (was in der Regel aber eigentlich nicht nötig ist):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>daten<span class="sc">$</span>geschlecht <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(daten<span class="sc">$</span>geschlecht)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>daten<span class="sc">$</span>treatment <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(daten<span class="sc">$</span>treatment)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(daten)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  5 variables:
 $ ID        : num  89045 43678 88475 69781 88766 ...
 $ name      : chr  "Onno" "Stefan" "Sylvain" "Annette" ...
 $ geschlecht: Factor w/ 2 levels "m","w": 1 1 1 2 2 1
 $ treatment : Factor w/ 2 levels "0","1": 1 2 2 2 1 2
 $ bdi.wert  : num  12.5 13 11.75 9.85 10.15 ...</code></pre>
</div>
</div>
<section id="zusammenführen-von-data.frames-merging" class="level2">
<h2 class="anchored" data-anchor-id="zusammenführen-von-data.frames-merging">1.1 Zusammenführen von data.frames (merging)</h2>
<p>Nehmen wir an, wir hätten nun einen weiteren data.frame, der die Nachnamen einiger Studienteilnehmer*innen enthält:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>daten2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="fu">c</span>(<span class="dv">43678</span>, <span class="dv">88475</span>, <span class="dv">88766</span>, <span class="dv">89045</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">nachname =</span> <span class="fu">c</span>(<span class="st">"Tegemann"</span>, <span class="st">"Laffont"</span>, <span class="st">"Brandner"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Schreiner"</span>), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>daten2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID  nachname
1 43678  Tegemann
2 88475   Laffont
3 88766  Brandner
4 89045 Schreiner</code></pre>
</div>
</div>
<p>…und möchten diesen nun mit unseren Daten zusammenführen, dann geht das sehr flexibel mit der Funktion <code>merge()</code>. <code>merge()</code> verknüpft die Datensätze automatisch über Spalten in den beiden Datensätzen, die gleich benannt sind, in unserem Beispiel die Spalte <code>ID</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">merge</span>(daten, daten2, <span class="at">all=</span><span class="cn">TRUE</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>dat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID    name geschlecht treatment bdi.wert  nachname
1 43678  Stefan          m         1    13.00  Tegemann
2 67743    Eike          m         1     9.95      &lt;NA&gt;
3 69781 Annette          w         1     9.85      &lt;NA&gt;
4 88475 Sylvain          m         1    11.75   Laffont
5 88766  Marina          w         0    10.15  Brandner
6 89045    Onno          m         0    12.50 Schreiner</code></pre>
</div>
</div>
<p>Sind die Spalten mit den Schlüsselvariablen nicht gleich benannt kann man im <code>by.x</code>-Argument spezifizieren, wie die Variable im ersten Datensatz heißt und im <code>by.y</code>-Argument, wie sie im zweiten Datensatz heißt. Heißen mehrere Variablen in beiden Datensätzen gleich und man möchte nur eine dieser gleichnamigen Variablen zur Verknüpfung verwenden, spezifiziert man diese im <code>by</code>-Argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">merge</span>(daten, daten2, <span class="at">by=</span><span class="st">"ID"</span>, <span class="at">all=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>dat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID    name geschlecht treatment bdi.wert  nachname
1 43678  Stefan          m         1    13.00  Tegemann
2 67743    Eike          m         1     9.95      &lt;NA&gt;
3 69781 Annette          w         1     9.85      &lt;NA&gt;
4 88475 Sylvain          m         1    11.75   Laffont
5 88766  Marina          w         0    10.15  Brandner
6 89045    Onno          m         0    12.50 Schreiner</code></pre>
</div>
</div>
<p>Wenn man zwei Datensätze untereinander schreiben möchte, müssen sie dieselbe Spaltenausdehnung haben:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(daten2, daten2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID  nachname
1 43678  Tegemann
2 88475   Laffont
3 88766  Brandner
4 89045 Schreiner
5 43678  Tegemann
6 88475   Laffont
7 88766  Brandner
8 89045 Schreiner</code></pre>
</div>
</div>
<p>…und wenn man zwei Datensätze nebeneinander schreiben möchte, müssen sie dieselbe Zeilenausdehnung haben:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(daten2, daten2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID  nachname    ID  nachname
1 43678  Tegemann 43678  Tegemann
2 88475   Laffont 88475   Laffont
3 88766  Brandner 88766  Brandner
4 89045 Schreiner 89045 Schreiner</code></pre>
</div>
</div>
<p>Möchte man viele Datensätze derselben Ausdehnung nebeneinander oder untereinander in einen <code>data.frame</code>schreiben, kann man die Funktion <code>do.call()</code> benutzen, die analog zu hier im Beispiel mit <code>cbind()</code> auch mit <code>rbind()</code> funktioniert:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"cbind"</span>, <span class="fu">list</span>(daten2, daten2, daten2, daten2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID  nachname    ID  nachname    ID  nachname    ID  nachname
1 43678  Tegemann 43678  Tegemann 43678  Tegemann 43678  Tegemann
2 88475   Laffont 88475   Laffont 88475   Laffont 88475   Laffont
3 88766  Brandner 88766  Brandner 88766  Brandner 88766  Brandner
4 89045 Schreiner 89045 Schreiner 89045 Schreiner 89045 Schreiner</code></pre>
</div>
</div>
<p>Zum weiteren Umgang mit dem Listenformat <code>list</code> siehe Kapitel 2, weiter unten.</p>
</section>
<section id="navigation-in-data.frames-subsetting" class="level2">
<h2 class="anchored" data-anchor-id="navigation-in-data.frames-subsetting">1.2 Navigation in data.frames (subsetting)</h2>
<p>Ähnlich wie in Vektoren kann man in data.frames über eckige Klammern einzelne Elemente anzeigen lassen oder verändern. Da data.frames zwei Dimensionen haben (Vektoren haben nur eine), muss man hier das Element mit [Zeile, Spalte] auswählen, also beispielsweise</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">4</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sylvain"</code></pre>
</div>
</div>
<p>Alternativ kann man mit dem Dollar-Zeichen eine Variable ansteuern:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">4</span>,]<span class="sc">$</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sylvain"</code></pre>
</div>
</div>
<p>Oder man kann den Variablennamen (mit hochgestellten Anführungszeichen) verwenden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">4</span>,<span class="st">"name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sylvain"</code></pre>
</div>
</div>
<p>Die komplette “name”-Spalte gibt man aus, indem man die Zeilenbezeichnung weglässt oder alle Zeilen explizit auswählt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Stefan"  "Eike"    "Annette" "Sylvain" "Marina"  "Onno"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dat[,<span class="st">"name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Stefan"  "Eike"    "Annette" "Sylvain" "Marina"  "Onno"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="st">"name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Stefan"  "Eike"    "Annette" "Sylvain" "Marina"  "Onno"   </code></pre>
</div>
</div>
<p>Auch die Reihenfolge zu variieren, ist möglich:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">6</span><span class="sc">:</span><span class="dv">1</span>,<span class="st">"name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Onno"    "Marina"  "Sylvain" "Annette" "Eike"    "Stefan" </code></pre>
</div>
</div>
<p>Um sich nur ausgewählte Spalten in selbst definierter Reihenfolge des Datensatzes anzusehen bzw. in einem neuen Objekt zu speichern:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> dat[,<span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"nachname"</span>, <span class="st">"bdi.wert"</span>, <span class="st">"treatment"</span>)]</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>dat2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
2    Eike      &lt;NA&gt;     9.95         1
3 Annette      &lt;NA&gt;     9.85         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<p>Wenn man sich nur bestimmte Subgruppen anschauen möchte:</p>
<ol type="1">
<li>Alle Mitglieder der Kontrollgruppe:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dat2[dat2<span class="sc">$</span>treatment <span class="sc">==</span> <span class="dv">0</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name  nachname bdi.wert treatment
5 Marina  Brandner    10.15         0
6   Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Alle mit einem BDI-Wert größer als 10:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>dat2[dat2<span class="sc">$</span>bdi.wert <span class="sc">&gt;</span> <span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Alle in der Treatment-Gruppe und einem BDI-Wert größer als 10:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>dat2[dat2<span class="sc">$</span>treatment <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> dat2<span class="sc">$</span>bdi.wert <span class="sc">&gt;</span> <span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name nachname bdi.wert treatment
1  Stefan Tegemann    13.00         1
4 Sylvain  Laffont    11.75         1</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Alle in der Treatment-Gruppe oder einem BDI-Wert größer als 10:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>dat2[dat2<span class="sc">$</span>treatment <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> dat2<span class="sc">$</span>bdi.wert <span class="sc">&gt;</span> <span class="dv">10</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
2    Eike      &lt;NA&gt;     9.95         1
3 Annette      &lt;NA&gt;     9.85         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Alle, deren Vorname mit “S” beginnt:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>dat2[<span class="fu">grep</span>(<span class="st">"^S"</span>, dat2<span class="sc">$</span>name),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name nachname bdi.wert treatment
1  Stefan Tegemann    13.00         1
4 Sylvain  Laffont    11.75         1</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Alle, für die kein Nachname hinterlegt ist:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dat2[<span class="fu">is.na</span>(dat2<span class="sc">$</span>nachname),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name nachname bdi.wert treatment
2    Eike     &lt;NA&gt;     9.95         1
3 Annette     &lt;NA&gt;     9.85         1</code></pre>
</div>
</div>
<ol start="7" type="1">
<li>Der Datensatz ohne Personen, für die kein Nachname hinterlegt ist:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>dat2[<span class="sc">!</span><span class="fu">is.na</span>(dat2<span class="sc">$</span>nachname),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<p>oder</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>dat2[<span class="sc">-</span><span class="fu">which</span>(<span class="fu">is.na</span>(dat2<span class="sc">$</span>nachname)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
</section>
<section id="rekodieren-von-variablen-in-data.frames" class="level2">
<h2 class="anchored" data-anchor-id="rekodieren-von-variablen-in-data.frames">1.3 Rekodieren von Variablen in data.frames</h2>
<p>Wenn man bestimmte Werte im data.frame ersetzen möchte oder Variablen in andere Variablen umkodieren möchte, hat man verschiedene Möglichkeiten.</p>
<ol type="1">
<li>Alle Werte im Datensatz ersetzen:<br>
</li>
</ol>
<!-- -->
<ol type="a">
<li>z.B. alle fehlenden Werte durch einen bestimmten Missingcode ersetzen:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>dat2[<span class="fu">is.na</span>(dat2)] <span class="ot">&lt;-</span> <span class="st">"-97"</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>dat2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
2    Eike       -97     9.95         1
3 Annette       -97     9.85         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>oder einen bestimmen Wert durch andere Werte oder Missings ersetzen:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>dat2[dat2<span class="sc">==</span><span class="st">"-97"</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>dat2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment
1  Stefan  Tegemann    13.00         1
2    Eike      &lt;NA&gt;     9.95         1
3 Annette      &lt;NA&gt;     9.85         1
4 Sylvain   Laffont    11.75         1
5  Marina  Brandner    10.15         0
6    Onno Schreiner    12.50         0</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Neue Variablen in Abhängigkeit von anderen Variablen bilden</li>
</ol>
<p>Mit der Funktion <code>ifelse</code> formuliert man zunächst eine Bedingung (hier alle, die einen BDI kleiner als 10 haben und gleichzeitig in der Treatment-Gruppe sind), danach gibt man durch ein Komma abgetrennt an, welche Werte in der neuen Variable stehen sollen (hier <code>"Treatment war wirksam"</code>). Durch ein weiteres Komma abgetrennt kann dann angegeben werden, was passieren soll, wenn die Bedingung nicht zutrifft. Dabei kann dort sogar ein weiteres <code>ifelse</code>-Statement eingefügt werden, wie hier im Beispiel, das nach genau denselben Regeln aufgebaut ist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>dat2<span class="sc">$</span>neueVar <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="at">test=</span>dat2<span class="sc">$</span>bdi.wert <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> dat2<span class="sc">$</span>treatment<span class="sc">==</span><span class="dv">1</span>,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">yes=</span><span class="st">"Treatment war wirksam"</span>,  </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">no =</span> <span class="fu">ifelse</span>(<span class="at">test=</span>dat2<span class="sc">$</span>bdi.wert <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> dat2<span class="sc">$</span>treatment<span class="sc">==</span><span class="dv">1</span>,   </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">yes=</span><span class="st">"Treatment nicht wirksam"</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">no=</span><span class="st">"kein Treatment"</span>))</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>dat2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment                 neueVar
1  Stefan  Tegemann    13.00         1 Treatment nicht wirksam
2    Eike      &lt;NA&gt;     9.95         1   Treatment war wirksam
3 Annette      &lt;NA&gt;     9.85         1   Treatment war wirksam
4 Sylvain   Laffont    11.75         1 Treatment nicht wirksam
5  Marina  Brandner    10.15         0          kein Treatment
6    Onno Schreiner    12.50         0          kein Treatment</code></pre>
</div>
</div>
<p>Auch kann die Funktion <code>recode</code> aus dem Paket <code>car</code> verwendet werden. Hier werden die Werte oder Wertebereiche einer Variablen umkodiert. Der Wertebereich des niedrigsten aufgetretenen Wertes bis zum Wert 10 entspricht dem hier benutzten Statement <code>lo:10</code>. Wie man mit allen nicht explizit erwähnten Werten verfahren möchte, kann mit dem <code>else</code>-Argument festlegen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>dat2<span class="sc">$</span>neueVar <span class="ot">&lt;-</span> car<span class="sc">::</span><span class="fu">recode</span>(dat2<span class="sc">$</span>bdi.wert, <span class="st">"lo:10='leichte Depression'; else='schwere Depression'"</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>dat2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name  nachname bdi.wert treatment            neueVar
1  Stefan  Tegemann    13.00         1 schwere Depression
2    Eike      &lt;NA&gt;     9.95         1 leichte Depression
3 Annette      &lt;NA&gt;     9.85         1 leichte Depression
4 Sylvain   Laffont    11.75         1 schwere Depression
5  Marina  Brandner    10.15         0 schwere Depression
6    Onno Schreiner    12.50         0 schwere Depression</code></pre>
</div>
</div>
</section>
<section id="umstrukturieren-von-data.frames" class="level2">
<h2 class="anchored" data-anchor-id="umstrukturieren-von-data.frames">1.4 Umstrukturieren von data.frames</h2>
<p>Unser Datensatz befindet sich im sogenannten Wide-Format. Für manche Anwendungen kann es sinnvoll sein, den Datensatz in das sogenannte Long-Format zu bringen, in dem alle Werte der Personen in einer einzigen Variablen untereinander stehen. Früher benutzte man das Paket <code>reshape2</code>, um einen Datensatz ins Long-Format zu bringen, was auch jetzt noch immer unkompliziert möglich ist:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>datl <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(dat, <span class="at">id.vars=</span><span class="st">"ID"</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>datl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      ID   variable     value
1  43678       name    Stefan
2  67743       name      Eike
3  69781       name   Annette
4  88475       name   Sylvain
5  88766       name    Marina
6  89045       name      Onno
7  43678 geschlecht         m
8  67743 geschlecht         m
9  69781 geschlecht         w
10 88475 geschlecht         m
11 88766 geschlecht         w
12 89045 geschlecht         m
13 43678  treatment         1
14 67743  treatment         1
15 69781  treatment         1
16 88475  treatment         1
17 88766  treatment         0
18 89045  treatment         0
19 43678   bdi.wert        13
20 67743   bdi.wert      9.95
21 69781   bdi.wert      9.85
22 88475   bdi.wert     11.75
23 88766   bdi.wert     10.15
24 89045   bdi.wert      12.5
25 43678   nachname  Tegemann
26 67743   nachname      &lt;NA&gt;
27 69781   nachname      &lt;NA&gt;
28 88475   nachname   Laffont
29 88766   nachname  Brandner
30 89045   nachname Schreiner</code></pre>
</div>
</div>
<p>und mit <code>dcast()</code> formte man den Datensatz wieder zurück:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>reshape2<span class="sc">::</span><span class="fu">dcast</span>(datl, ID <span class="sc">~</span> variable)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ID    name geschlecht treatment bdi.wert  nachname
1 43678  Stefan          m         1       13  Tegemann
2 67743    Eike          m         1     9.95      &lt;NA&gt;
3 69781 Annette          w         1     9.85      &lt;NA&gt;
4 88475 Sylvain          m         1    11.75   Laffont
5 88766  Marina          w         0    10.15  Brandner
6 89045    Onno          m         0     12.5 Schreiner</code></pre>
</div>
</div>
<p>In jüngerer Zeit wurden dazu recht effiziente Funktionen entwickelt, die im Paket <code>tidyr</code> zu finden sind. Hier wird nur rudimentär in die Benutzung dieser Funktionen eingeführt – der/die interessierte Leser/in mag sich in folgende Seite vertiefen: http://tidyr.tidyverse.org/articles/pivot.html Hierbei ist zu beachten, dass bei Benutzung des Pakets <code>tidyr</code> die <code>data.frames</code> zu anderen Objekten werden, nämlich <code>tibbles</code> (die aber problemlos mit der Funktion <code>as.data.frame()</code> wieder in <code>data.frames</code> zurücktransformiert werden können. Darüber hinaus weicht die zu verwendende Syntax hier deutlich von der bisher gezeigten basalen R-Syntax ab. Eine besondere Rolle spielt hier der sogenannte Pipe-Operator <code>%&gt;%</code>, über den hier http://www.rdocumentation.org/packages/magrittr/versions/1.0.1/topics/%25%3E%25 oder an anderer Stelle weitergelesen werden kann.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Umstrukturierung unserer Daten ins Long-Format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols=</span>name<span class="sc">:</span>nachname,</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_to =</span> <span class="st">"variable"</span>,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>oder, äquivalent dazu, mit:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_longer</span>(dat, <span class="at">cols=</span>name<span class="sc">:</span>nachname, <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 3
      ID variable   value   
   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;   
 1 43678 name       Stefan  
 2 43678 geschlecht m       
 3 43678 treatment  1       
 4 43678 bdi.wert   13      
 5 43678 nachname   Tegemann
 6 67743 name       Eike    
 7 67743 geschlecht m       
 8 67743 treatment  1       
 9 67743 bdi.wert   9.95    
10 67743 nachname   &lt;NA&gt;    
# ℹ 20 more rows</code></pre>
</div>
</div>
<p>und mit <code>pivot_wider()</code> kann man den Datensatz wieder zurück formen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>datl  <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_from =</span> variable, <span class="at">values_from =</span> value</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>oder genauso:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(datl, <span class="at">names_from =</span> variable, <span class="at">values_from =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
     ID name    geschlecht treatment bdi.wert nachname 
  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    
1 43678 Stefan  m          1         13       Tegemann 
2 67743 Eike    m          1         9.95     &lt;NA&gt;     
3 69781 Annette w          1         9.85     &lt;NA&gt;     
4 88475 Sylvain m          1         11.75    Laffont  
5 88766 Marina  w          0         10.15    Brandner 
6 89045 Onno    m          0         12.5     Schreiner</code></pre>
</div>
</div>
</section>
</section>
<section id="listen" class="level1">
<h1>2. Listen</h1>
<p>Wie oben schon erwähnt wurde, sind data.frames Spezialfälle von Listen, die Vektoren gleicher Länge enthalten. Listen, die keine data.frames sind, dürfen Elemente unterschiedlichen Typs und unterschiedlicher Länge enthalten. Die Elemente einer Liste dürfen sogar wieder Listen sein, aber auch data.frames, Vektoren, Skalare oder andere beliebige R-Objekte.</p>
<p>Zum Beispiel könnte man eine Liste mit den oben erzeugten Teildatensätzen und einzelnen Komponenten dieser erstellen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>L1 <span class="ot">&lt;-</span> <span class="fu">list</span>(daten<span class="sc">$</span>bdi.wert, daten2<span class="sc">$</span>nachname, dat2)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(L1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ : num [1:6] 12.5 13 11.75 9.85 10.15 ...
 $ : chr [1:4] "Tegemann" "Laffont" "Brandner" "Schreiner"
 $ :'data.frame':   6 obs. of  5 variables:
  ..$ name     : chr [1:6] "Stefan" "Eike" "Annette" "Sylvain" ...
  ..$ nachname : chr [1:6] "Tegemann" NA NA "Laffont" ...
  ..$ bdi.wert : num [1:6] 13 9.95 9.85 11.75 10.15 ...
  ..$ treatment: Factor w/ 2 levels "0","1": 2 2 2 2 1 1
  ..$ neueVar  : chr [1:6] "schwere Depression" "leichte Depression" "leichte Depression" "schwere Depression" ...</code></pre>
</div>
</div>
<p>…und die Elemente dieser Liste benennen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(L1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Werte"</span>, <span class="st">"Nachnamen"</span>, <span class="st">"Gesamt"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>L1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Werte
[1] 12.50 13.00 11.75  9.85 10.15  9.95

$Nachnamen
[1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner"

$Gesamt
     name  nachname bdi.wert treatment            neueVar
1  Stefan  Tegemann    13.00         1 schwere Depression
2    Eike      &lt;NA&gt;     9.95         1 leichte Depression
3 Annette      &lt;NA&gt;     9.85         1 leichte Depression
4 Sylvain   Laffont    11.75         1 schwere Depression
5  Marina  Brandner    10.15         0 schwere Depression
6    Onno Schreiner    12.50         0 schwere Depression</code></pre>
</div>
</div>
<section id="subsetting-in-listen" class="level2">
<h2 class="anchored" data-anchor-id="subsetting-in-listen">2.1 Subsetting in Listen</h2>
<p>Auch bei Listen gibt es wieder zwei Möglichkeiten, wie man auf die Elemente zugreifen kann:</p>
<ol type="1">
<li>Über den Index, z.B. wenn man im dritten Listenelement weitere Unterelemente ansteuern möchte, wie hier die zweite Spalte und die fünfte Zeile:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>L1[[<span class="dv">3</span>]][<span class="dv">5</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Brandner"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Über den Namen in Anführungszeichen oder mit vorangestelltem Dollar-Zeichen:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>L1[[<span class="st">"Gesamt"</span>]][<span class="dv">5</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Brandner"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>L1[[<span class="st">"Gesamt"</span>]][<span class="dv">5</span>,<span class="st">"nachname"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Brandner"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>L1<span class="sc">$</span>Gesamt<span class="sc">$</span>nachname[<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Brandner"</code></pre>
</div>
</div>
<p>Eine Teilliste der Liste kann aufgerufen werden, indem die einzelnen Komponenten indiziert werden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>L1[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Werte
[1] 12.50 13.00 11.75  9.85 10.15  9.95

$Nachnamen
[1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner"</code></pre>
</div>
</div>
</section>
<section id="merging-von-listen" class="level2">
<h2 class="anchored" data-anchor-id="merging-von-listen">2.2 Merging von Listen</h2>
<p>Listen können kombiniert werden, indem sie mit <code>c()</code> verbunden werden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>L2 <span class="ot">&lt;-</span> <span class="fu">c</span>(L1[<span class="dv">2</span>], L1[<span class="dv">1</span>])</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>L2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nachnamen
[1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner"

$Werte
[1] 12.50 13.00 11.75  9.85 10.15  9.95</code></pre>
</div>
</div>
<p>Weitere Komponenten können über Neuindizierung oder Namen hinzugefügt werden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>L2[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>L2<span class="sc">$</span>nochwas <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>L2[[<span class="st">"undnochwas"</span>]] <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">wahr=</span><span class="fu">c</span>(<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">TRUE</span>),<span class="at">falsch=</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>))</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>L2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nachnamen
[1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner"

$Werte
[1] 12.50 13.00 11.75  9.85 10.15  9.95

[[3]]
[1] TRUE

$nochwas
[1] FALSE

$undnochwas
   wahr falsch
1 FALSE   TRUE
2  TRUE   TRUE
3  TRUE  FALSE</code></pre>
</div>
</div>
<p>Sollen Komponenten entfernt werden, kann man wieder den Minus-Operator benutzen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>L2 <span class="ot">&lt;-</span> L2[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)]</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>L2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Nachnamen
[1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner"

$Werte
[1] 12.50 13.00 11.75  9.85 10.15  9.95

$undnochwas
   wahr falsch
1 FALSE   TRUE
2  TRUE   TRUE
3  TRUE  FALSE</code></pre>
</div>
</div>
</section>
<section id="aufheben-der-listenstruktur" class="level2">
<h2 class="anchored" data-anchor-id="aufheben-der-listenstruktur">2.3 Aufheben der Listenstruktur</h2>
<p>Möchte man keine Liste mehr haben, hilft die Funktion <code>unlist()</code> weiter, die alle Elemente der Liste nacheinander in einen benannten Vektor schreibt, dessen Namen man aber auch entfernen kann:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>(L3 <span class="ot">&lt;-</span> <span class="fu">unlist</span>(L2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Nachnamen1         Nachnamen2         Nachnamen3         Nachnamen4 
        "Tegemann"          "Laffont"         "Brandner"        "Schreiner" 
            Werte1             Werte2             Werte3             Werte4 
            "12.5"               "13"            "11.75"             "9.85" 
            Werte5             Werte6   undnochwas.wahr1   undnochwas.wahr2 
           "10.15"             "9.95"            "FALSE"             "TRUE" 
  undnochwas.wahr3 undnochwas.falsch1 undnochwas.falsch2 undnochwas.falsch3 
            "TRUE"             "TRUE"             "TRUE"            "FALSE" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unname</span>(<span class="fu">unlist</span>(L2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Tegemann"  "Laffont"   "Brandner"  "Schreiner" "12.5"      "13"       
 [7] "11.75"     "9.85"      "10.15"     "9.95"      "FALSE"     "TRUE"     
[13] "TRUE"      "TRUE"      "TRUE"      "FALSE"    </code></pre>
</div>
</div>
</section>
</section>
<section id="grafiken" class="level1">
<h1>3. Grafiken</h1>
<p>Manchmal möchte man seine Daten visualisieren. Dafür gibt es auch in der Basis-Variante von R ohne zusätzliche Paketinstallation sehr praktische Funktionen.</p>
<section id="balkendiagramme" class="level2">
<h2 class="anchored" data-anchor-id="balkendiagramme">1.1 Balkendiagramme</h2>
<p>Z.B. Verteilung des BDI-Werts:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(bdi.wert <span class="sc">~</span> name, <span class="at">data=</span>dat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ws2_files/figure-html/25a-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Für einfache Häufigkeitsverteilungen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(dat2<span class="sc">$</span>bdi.wert)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ws2_files/figure-html/25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Boxplots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(bdi.wert <span class="sc">~</span> treatment, <span class="at">data=</span>dat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ws2_files/figure-html/27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="die-plot-funktion-und-mehrere-grafiken-neben--oder-untereinander" class="level2">
<h2 class="anchored" data-anchor-id="die-plot-funktion-und-mehrere-grafiken-neben--oder-untereinander">1.2 Die <code>plot()</code>-Funktion und mehrere Grafiken neben- oder untereinander</h2>
<p>Möchte man in einem Fenster mehrere Grafiken unter- oder nebeneinander darstellen, kann man sich des Parameters <code>mfrow</code> der <code>par()</code>-Funktion bedienen. Die erste Zahl gibt an, in wie vielen Grafiken die Zeilen untereinander dargestellt werden sollen und die zweite Zahl, in wie vielen Spalten nebeneinander. Sollen die Daten zunächst geplottet werden und daneben deren Verteilung (im Beispiel nur bedingt sinnvoll), sieht das so aus:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dat2<span class="sc">$</span>bdi.wert)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(dat2<span class="sc">$</span>bdi.wert),<span class="at">main=</span><span class="st">"Eine Verteilung"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ws2_files/figure-html/28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="das-paket-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="das-paket-ggplot2">1.3 Das Paket <code>ggplot2</code></h2>
<p>Ein mächtiges Paket zur Erstellung von Grafiken ist <code>ggplot2</code>, zu dem z.B. unter diesem Link eine gute Einführung gegeben wird: http://methodenlehre.github.io/einfuehrung-in-R/grafiken-mit-ggplot2.html</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/iqb-research\.github\.io\/IQB-Methods\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../docs/R/ws1.html" class="pagination-link" aria-label="Einführung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Einführung</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../docs/R/ws3.html" class="pagination-link" aria-label="Pakete und Daten laden">
        <span class="nav-page-text">Pakete und Daten laden</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/iqb-research/IQB-Methods/edit/main/docs/R/ws2.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/iqb-research/IQB-Methods/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>